<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Panel dostępu sterowania</title>
    <link rel="icon" href="/static/img/favicon.png">
    <link rel = "stylesheet" href = "/static/css/style.css">
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
</head>
<body>
    <div class="body_child">
    <div id="menu">
        <ul>
            <li id="menu_item1"><img src="/static/img/menu_icon1.png" alt=""><span>Odczyty</span></li>
            <li id="menu_item2"><img src="/static/img/menu_icon2.png" alt=""><span>Ustawienia</span></li>
            <li id="menu_item3"><img src="/static/img/menu_icon3.png" alt=""><span>Harmonogramy</span></li>
        </ul>
    </div>
    

    <div class="container1 active_container">
                    
        <div class="container1_left">
            <ul>
                <li id="container1_item1">Temperatura</li>
                <li id="container1_item2">Wilgotność</li>
                <li id="container1_item3">Co2</li>
                <li id="container1_item4">Poziom wypełnienia</li>
                <li id="container1_item5">Czujnik ruchu</li>
                <li id="container1_item6">Kierunek wiatru</li>
                <li id="container1_item7">Siła wiatru</li>
            </ul>
        </div>
        <div class="container1_right">
            <div>
                <div id="container1_box1" class="active_container">
                    Temperatura na zewnątrz wynosi: 
                    <p id=result>
                        {{temp}}
                    </p>°C
                
                <div id="my_dataviz"></div>
                    
                    Temperatura wewnątrz wynosi: 
                    <p id=result>
                        {{temp2}}
                    </p>°C
                <div id="my_dataviz"></div>
                <!--<canvas id="myChart" width="400" height="400"></canvas>-->
                
 
                </div>
                <div id="container1_box2">
                    Aktualna wilgotność na zewnątrz wynosi:
                    <p id=result2>
                        {{hum}}
                    </p>
                    Aktualna wilgotność wewnątrz wynosi:
                    <p id=result2>
                        {{hum2}}
                    </p>
                </div>
                
                <div id="container1_box3">
                    Aktualny poziom Co2 na zewnątrz :
                    <p id=result4>
                        {{co2}}
                    </p>
                    Aktualny poziom Co2 wewnątrz :
                    <p id=result4>
                        {{co22}}
                    </p>
                </div>
                
                <div id="container1_box4">
                    Aktualny procent wypełnienia:
                    <p id=result5>{{percent}}</p>
                </div>
                
                <div id="container1_box5">
                    Stan czujnika Pir salon: 
                    <p id=result3>
                        {{move}}
                    </p>
                    Stan czujnika Pir wejście: 
                    <p id=result3>
                        {{move2}}
                    </p>
                    Stan czujnika Pir garaż: 
                    <p id=result3>
                        {{move3}}
                    </p>
                </div>
                
                <div id="container1_box6">
                    Kierunek wiatru to:
                    <p id=result6>
                    {{direction}}
                    </p>
                </div>
                
                <div id="container1_box7">
                    Siła wiatru to:
                    <p id=result7>
                    {{strenght}}
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="container2">2</div>
    <div class="container3">3</div>

    </div>
    
    
            <script>
                $("#menu_item1").click(function(){
              $(this).addClass("active_item");
              $("#menu_item2").removeClass("active_item");
              $("#menu_item3").removeClass("active_item");
            });
            $("#menu_item2").click(function(){
              $(this).addClass("active_item");
              $("#menu_item1").removeClass("active_item");
              $("#menu_item3").removeClass("active_item");
            });
            $("#menu_item3").click(function(){
              $(this).addClass("active_item");
              $("#menu_item2").removeClass("active_item");
              $("#menu_item1").removeClass("active_item");
            });
            </script>
            <script>
            $("#menu_item1").click(function(){
              $(".container1").addClass("active_container");
              $(".container2").removeClass("active_container");
              $(".container3").removeClass("active_container");
            });
            $("#menu_item2").click(function(){
              $(".container2").addClass("active_container");
              $(".container1").removeClass("active_container");
              $(".container3").removeClass("active_container");
            });
            $("#menu_item3").click(function(){
              $(".container3").addClass("active_container");
              $(".container2").removeClass("active_container");
              $(".container1").removeClass("active_container");
            });
            </script>
            <script>
                $("#container1_item1").click(function(){
                  $("#container1_box1").addClass("active_container");
                  $("#container1_box2").removeClass("active_container");
                  $("#container1_box3").removeClass("active_container");
                  $("#container1_box4").removeClass("active_container");
                  $("#container1_box5").removeClass("active_container");
                  $("#container1_box6").removeClass("active_container");
                  $("#container1_box7").removeClass("active_container");
                });
                
                $("#container1_item2").click(function(){
                  $("#container1_box2").addClass("active_container");
                  $("#container1_box1").removeClass("active_container");
                  $("#container1_box3").removeClass("active_container");
                  $("#container1_box4").removeClass("active_container");
                  $("#container1_box5").removeClass("active_container");
                  $("#container1_box6").removeClass("active_container");
                  $("#container1_box7").removeClass("active_container");
                });
                
                $("#container1_item3").click(function(){
                  $("#container1_box3").addClass("active_container");
                  $("#container1_box1").removeClass("active_container");
                  $("#container1_box2").removeClass("active_container");
                  $("#container1_box4").removeClass("active_container");
                  $("#container1_box5").removeClass("active_container");
                  $("#container1_box6").removeClass("active_container");
                  $("#container1_box7").removeClass("active_container");
                });
                
                $("#container1_item4").click(function(){
                  $("#container1_box4").addClass("active_container");
                  $("#container1_box1").removeClass("active_container");
                  $("#container1_box2").removeClass("active_container");
                  $("#container1_box3").removeClass("active_container");
                  $("#container1_box5").removeClass("active_container");
                  $("#container1_box6").removeClass("active_container");
                  $("#container1_box7").removeClass("active_container");
                });
                
                $("#container1_item5").click(function(){
                  $("#container1_box5").addClass("active_container");
                  $("#container1_box1").removeClass("active_container");
                  $("#container1_box2").removeClass("active_container");
                  $("#container1_box3").removeClass("active_container");
                  $("#container1_box4").removeClass("active_container");
                  $("#container1_box6").removeClass("active_container");
                  $("#container1_box7").removeClass("active_container");
                });
                
                $("#container1_item6").click(function(){
                  $("#container1_box6").addClass("active_container");
                  $("#container1_box1").removeClass("active_container");
                  $("#container1_box2").removeClass("active_container");
                  $("#container1_box3").removeClass("active_container");
                  $("#container1_box4").removeClass("active_container");
                  $("#container1_box5").removeClass("active_container");
                  $("#container1_box7").removeClass("active_container");
                });
                
                $("#container1_item7").click(function(){
                  $("#container1_box7").addClass("active_container");
                  $("#container1_box1").removeClass("active_container");
                  $("#container1_box2").removeClass("active_container");
                  $("#container1_box3").removeClass("active_container");
                  $("#container1_box4").removeClass("active_container");
                  $("#container1_box5").removeClass("active_container");
                  $("#container1_box6").removeClass("active_container");
                });
                
                </script>
        <script src="/static/js/script.js" ></script>
        <script type=text/javascript>


            
            //let temperatureUpdate = setInterval(function sayHi() {
            //      $.getJSON('/background_process', function(data) {
              //          $("#result").text(data.temperature);
             //           });
              //  }, 1000)
            //let humidityUpdate = setInterval(function sayHi2() {
              //    $.getJSON('/background_process', function(data) {
             //           $("#result2").text(data.humidity);
                      
//                         });
//                 }, 1000)
//             let movementUpdate = setInterval(function sayHi3() {
//                   $.getJSON('/background_process', function(data) {
//                         $("#result3").text(data.movement);
                      
//                         });
//                 }, 100)
           // let Co2Update = setInterval(function sayHi4() {
             //     $.getJSON('/background_process', function(data) {
               //         $("#result").text(data.Co2);
                 //       });
       //         }, 2000)
 const box1 = document.querySelector('#container1_box1');
 const box2 = document.querySelector('#container1_box2');
 const box3 = document.querySelector('#container1_box3');                   
 let updateCheck = setInterval(function updateProperty() {
        
     if(box1.classList.contains("active_container"))
                {
                    $.getJSON('/background_process', function(data) {
                        $("#result").text(data.temperature);
                        });
                }
      else if(box2.classList.contains("active_container"))
                {
                    $.getJSON('/background_process', function(data) {
                        $("#result2").text(data.humidity);
                        });
                }
                  
                 
      else if(box3.classList.contains("active_container"))
                {
                    $.getJSON('/background_process', function(data) {
                        $("#result4").text(data.co2);
                        });
                }
                  
                }, 1000)
       
	</script>
<script>

// set the dimensions and margins of the graph
var margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 460 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

//Read the data
d3.csv("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/data_IC.csv",function(data) {

  // Add X axis --> it is a date format
  var x = d3.scaleLinear()
    .domain([1,100])
    .range([ 0, width ]);
  svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

  // Add Y axis
  var y = d3.scaleLinear()
    .domain([0, 13])
    .range([ height, 0 ]);
  svg.append("g")
    .call(d3.axisLeft(y));

  // This allows to find the closest X index of the mouse:
  var bisect = d3.bisector(function(d) { return d.x; }).left;

  // Create the circle that travels along the curve of chart
  var focus = svg
    .append('g')
    .append('circle')
      .style("fill", "none")
      .attr("stroke", "black")
      .attr('r', 8.5)
      .style("opacity", 0)

  // Create the text that travels along the curve of chart
  var focusText = svg
    .append('g')
    .append('text')
      .style("opacity", 0)
      .attr("text-anchor", "left")
      .attr("alignment-baseline", "middle")

  // Add the line
  svg
    .append("path")
    .datum(data)
    .attr("fill", "none")
    .attr("stroke", "steelblue")
    .attr("stroke-width", 1.5)
    .attr("d", d3.line()
      .x(function(d) { return x(d.x) })
      .y(function(d) { return y(d.y) })
      )

  // Create a rect on top of the svg area: this rectangle recovers mouse position
  svg
    .append('rect')
    .style("fill", "none")
    .style("pointer-events", "all")
    .attr('width', width)
    .attr('height', height)
    .on('mouseover', mouseover)
    .on('mousemove', mousemove)
    .on('mouseout', mouseout);


  // What happens when the mouse move -> show the annotations at the right positions.
  function mouseover() {
    focus.style("opacity", 1)
    focusText.style("opacity",1)
  }

  function mousemove() {
    // recover coordinate we need
    var x0 = x.invert(d3.mouse(this)[0]);
    var i = bisect(data, x0, 1);
    selectedData = data[i]
    focus
      .attr("cx", x(selectedData.x))
      .attr("cy", y(selectedData.y))
    focusText
      .html("x:" + selectedData.x + "  -  " + "y:" + selectedData.y)
      .attr("x", x(selectedData.x)+15)
      .attr("y", y(selectedData.y))
    }
  function mouseout() {
    focus.style("opacity", 0)
    focusText.style("opacity", 0)
  }

})

</script>
    </body>
</html>
